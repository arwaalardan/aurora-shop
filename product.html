 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Product Details - Aurora</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="/CSS/style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

</head>
<body>

<nav class="navbar navbar-expand-lg bg-white border-bottom shadow-sm py-2 sticky-top">
  <div class="container d-flex justify-content-between align-items-center">
    <button class="btn d-lg-none" type="button"><i class="bi bi-list fs-4"></i></button>
    <a class="navbar-brand mx-auto d-flex align-items-center" href="home.html">
      <img src="/images/5787415861416544232_121.jpg" alt="Aurora Logo" style="height: 70px;" />
    </a>
    <div class="d-flex align-items-center gap-3">
      <a href="login.html" class="text-dark"><i class="bi bi-person fs-5"></i></a>
      <a href="cart.html" class="text-dark position-relative">
        <i class="bi bi-bag fs-5"></i>
        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-dark" id="cart-count">0</span>
      </a>
    </div>
  </div>
</nav>


<a href="javascript:history.back()" class="text-decoration-none text-dark fs-5 ms-4 my-3 d-inline-block">
  &larr; Continue Shopping
</a>


<div class="container py-5">
  <div class="row align-items-center">
    <div class="col-md-6">
      <img id="product-img" src="" alt="Product Image" class="img-fluid rounded shadow-sm" />
    </div>
    <div class="col-md-6">
      <h1 id="product-name" class="mb-3"></h1>
      <p id="product-price" class="fs-5 mb-4"></p>

      <div class="mb-3">
        <label for="quantity" class="form-label">Quantity</label>
        <input type="number" id="quantity" class="form-control w-25" value="1" min="1">
      </div>

      <button class="btn btn-dark" id="add-to-cart-btn">Add to Cart</button>
    </div>
  </div>
</div>


<script>
  function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    let totalCount = 0;
    cart.forEach(item => totalCount += item.quantity || 1);
    document.getElementById("cart-count").textContent = totalCount;
  }

  function showMessage(text, type = "success") {
    const msg = document.createElement("div");
    msg.textContent = text;
    msg.className = `alert alert-${type} position-fixed top-0 start-50 translate-middle-x mt-3 shadow`;
    msg.style.zIndex = 9999;
    document.body.appendChild(msg);
    setTimeout(() => msg.remove(), 2000);
  }

  function addToCart(name, price, img, quantity) {
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    const found = cart.find(item => item.name === name);

    if (found) {
      found.quantity += quantity;
    } else {
      cart.push({ name, price, img, quantity });
    }

    localStorage.setItem("cart", JSON.stringify(cart));
    updateCartCount();
    showMessage("Item has been added");
  }

  document.addEventListener("DOMContentLoaded", () => {
    updateCartCount();

    const params = new URLSearchParams(window.location.search);
    const name = params.get("name");
    const price = params.get("price");
    const img = params.get("img");

    document.getElementById("product-name").textContent = name;
    document.getElementById("product-price").textContent = price + " SR";
    document.getElementById("product-img").src = img;

    document.getElementById("add-to-cart-btn").addEventListener("click", () => {
      const quantity = parseInt(document.getElementById("quantity").value);
      if (quantity > 0) {
        addToCart(name, parseFloat(price), img, quantity);
      }
    });
  });
</script>

</body>
</html>
